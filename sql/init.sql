CREATE SEQUENCE ClientIDSequence START 1;
CREATE TABLE Client (
    ClientID INTEGER PRIMARY KEY DEFAULT nextval('ClientIDSequence'),
    LastName VARCHAR(50),
    FirstName VARCHAR(50),
    MiddleName VARCHAR(50),
    BirthDate DATE,
    PassportSeries VARCHAR(10),
    PassportNumber VARCHAR(10),
    Address VARCHAR(100),
    Phone VARCHAR(20)
);

CREATE SEQUENCE CarIDSequence START 1;
CREATE TABLE Car (
    CarID INTEGER PRIMARY KEY DEFAULT nextval('CarIDSequence'),
    Brand VARCHAR(50),
    Color VARCHAR(30),
    Year INT,
    PlateNumber VARCHAR(15),
    ClientID INT,
    FOREIGN KEY (ClientID) REFERENCES Client(ClientID)
);

CREATE SEQUENCE WorkerIDSequence START 1;
CREATE TABLE Worker (
    WorkerID INTEGER PRIMARY KEY DEFAULT nextval('WorkerIDSequence'),
    LastName VARCHAR(50),
    FirstName VARCHAR(50),
    MiddleName VARCHAR(50),
    Specialty VARCHAR(50),
    Grade INT,
    ExperienceYears INT,
    Status VARCHAR(20)
);

CREATE SEQUENCE ServiceIDSequence START 1;
CREATE TABLE Service (
    ServiceID INTEGER PRIMARY KEY DEFAULT nextval('ServiceIDSequence'),
    Name VARCHAR(100),
    Description VARCHAR(200),
    HourCost DECIMAL(10,2)
);

CREATE SEQUENCE OrderIDSequence START 1;
CREATE TABLE Orders (
    OrderID INTEGER PRIMARY KEY DEFAULT nextval('OrderIDSequence'),
    ClientID INT,
    CarID INT,
    DateIn DATE,
    DatePromised DATE,
    DateOut DATE,
    Status VARCHAR(20),
    FOREIGN KEY (ClientID) REFERENCES Client(ClientID),
    FOREIGN KEY (CarID) REFERENCES Car(CarID)
);

CREATE SEQUENCE FaultIDSequence START 1;
CREATE TABLE OrderFault (
    FaultID INTEGER PRIMARY KEY DEFAULT nextval('FaultIDSequence'),
    OrderID INT,
    FaultDescription VARCHAR(200),
    FOREIGN KEY (OrderID) REFERENCES Orders(OrderID)
);

CREATE SEQUENCE PositionIDSequence START 1;
CREATE TABLE OrderService (
    PositionID INTEGER PRIMARY KEY DEFAULT nextval('PositionIDSequence'),
    OrderID INT,
    ServiceID INT,
    WorkHours DECIMAL(5,2),
    WorkCost DECIMAL(10,2),
    PartsCost DECIMAL(10,2),
    FOREIGN KEY (OrderID) REFERENCES Orders(OrderID),
    FOREIGN KEY (ServiceID) REFERENCES Service(ServiceID)
);

CREATE SEQUENCE RecordIDSequence START 1;
CREATE TABLE OrderWorker (
    RecordID INTEGER PRIMARY KEY DEFAULT nextval('RecordIDSequence'),
    OrderID INT,
    WorkerID INT,
    FOREIGN KEY (OrderID) REFERENCES Orders(OrderID),
    FOREIGN KEY (WorkerID) REFERENCES Worker(WorkerID)
);

-- Наполнение таблиц

INSERT INTO Client (LastName, FirstName, MiddleName, BirthDate, PassportSeries, PassportNumber, Address, Phone) VALUES
('Иванов','Петр','Сергеевич','1985-03-12','AB','123456','Москва, Ленина 10','89001112233'),
('Сидоров','Алексей','Игоревич','1990-07-22','BM','654321','Москва, Кирова 5','89005556677'),
('Петрова','Мария','Андреевна','1988-11-01','MP','112233','СПб, Невский 100','89112223344'),
('Кузнецов','Олег','Павлович','1979-02-14','PP','998877','Казань, Кремлевская 3','89223334455'),
('Соколова','Анна','Викторовна','1995-09-30','TT','445566','Екатеринбург, Мира 20','89334445566'),
('Морозов','Илья','Дмитриевич','1987-04-18','AB','778899','Москва, Тверская 15','89007778899'),
('Волкова','Елена','Сергеевна','1992-12-05','MP','334455','СПб, Литейный 22','89113334455'),
('Зайцев','Николай','Иванович','1983-06-21','BM','556677','Новосибирск, Красный пр. 50','89035556677'),
('Беляев','Георгий','Петрович','1975-09-14','PP','112244','Казань, Баумана 8','89225557788'),
('Громова','Ольга','Алексеевна','1998-03-03','TT','778855','Екатеринбург, Ленина 40','89335558899'),
('Семенов','Даниил','Олегович','1991-10-10','AB','991122','Москва, Арбат 12','89009991122'),
('Фролова','Кристина','Игоревна','1996-08-08','BM','221133','СПб, Московский 10','89114445566'),
('Ершов','Максим','Андреевич','1984-02-02','MP','667788','Казань, Чистопольская 5','89226667788'),
('Тарасов','Владимир','Павлович','1978-11-11','PP','445577','Новосибирск, Гоголя 7','89047778899'),
('Кириллова','Алина','Сергеевна','1999-07-07','TT','889900','Екатеринбург, Малышева 60','89336669900'),
('Лебедев','Степан','Ильич','1986-01-15','AB','113355','Москва, Садовая 9','89001113355'),
('Сафонова','Дарья','Петровна','1993-05-25','BM','224466','СПб, Пискаревский 3','89115556677'),
('Гаврилов','Роман','Георгиевич','1982-04-04','MP','778899','Казань, Амирхана 12','89227778899'),
('Ковалев','Егор','Алексеевич','1994-09-19','PP','556644','Новосибирск, Фрунзе 11','89056667788'),
('Романова','Вера','Ильинична','1997-12-12','TT','334422','Екатеринбург, Белинского 25','89334442211'),
('Жуков','Артем','Сергеевич','1989-03-30','AB','667799','Москва, Пресненская 2','89007779988'),
('Федорова','Юлия','Андреевна','1992-02-22','BM','998844','СПб, Савушкина 15','89118884455'),
('Никитин','Павел','Олегович','1981-08-28','MP','112299','Казань, Ершова 9','89229991122'),
('Королева','Светлана','Игоревна','1996-06-06','PP','556677','Новосибирск, Ленина 1','89056667711'),
('Борисов','Александр','Петрович','1980-10-17','TT','778899','Екатеринбург, Уральская 70','89337778899');

INSERT INTO Car (Brand, Color, Year, PlateNumber, ClientID) VALUES
('Toyota Camry','Черный',2015,'A123BC77',1),
('BMW X5','Белый',2018,'B777BB77',2),
('Lada Vesta','Синий',2020,'C555CC178',3),
('Audi A4','Красный',2016,'E111EE116',4),
('Hyundai Solaris','Серый',2017,'K999KK96',5),
('Kia Rio','Белый',2019,'M123MM77',6),
('Volkswagen Polo','Серебристый',2014,'P456PP98',7),
('Mercedes C200','Черный',2021,'X777XX77',8),
('Skoda Octavia','Синий',2013,'O888OO116',9),
('Ford Focus','Красный',2012,'F111FF96',10),
('Renault Logan','Белый',2018,'R222RR77',11),
('Mazda 6','Черный',2017,'M666MM178',12),
('Honda Civic','Серый',2016,'H333HH99',13),
('Nissan Qashqai','Белый',2020,'N444NN116',14),
('Toyota RAV4','Синий',2022,'T555TT77',15);

INSERT INTO Worker (LastName, FirstName, MiddleName, Specialty, Grade, ExperienceYears, Status) VALUES
('Смирнов','Иван','Петрович','Механик',4,10,'Работает'),
('Федоров','Дмитрий','Алексеевич','Электрик',5,12,'Работает'),
('Орлов','Сергей','Ильич','Диагност',3,5,'Работает'),
('Егоров','Антон','Георгиевич','Моторист',4,8,'Уволен'),
('Васильев','Павел','Олегович','Кузовщик',2,3,'Работает'),
('Киселев','Григорий','Сергеевич','Механик',5,15,'Работает'),
('Медведев','Юрий','Андреевич','Электрик',4,9,'Работает'),
('Сорокин','Виталий','Петрович','Диагност',3,4,'Работает'),
('Горбунов','Алексей','Игоревич','Кузовщик',2,2,'Работает'),
('Логинов','Степан','Георгиевич','Моторист',4,11,'Работает');

INSERT INTO Service (Name, Description, HourCost) VALUES
('Диагностика двигателя','Полная компьютерная диагностика',1500),
('Замена масла','Замена масла и фильтра',800),
('Ремонт подвески','Замена стоек, рычагов',2000),
('Ремонт электрики','Поиск и устранение неисправностей',1800),
('Покраска детали','Покраска кузовной детали',3500),
('Замена тормозных колодок','Передние/задние колодки',1200),
('Развал-схождение','Регулировка углов',1600),
('Замена свечей','Свечи зажигания',700),
('Чистка инжектора','Промывка форсунок',1400),
('Замена аккумулятора','Установка нового АКБ',900);

INSERT INTO Orders (ClientID, CarID, DateIn, DatePromised, DateOut, Status) VALUES
(1,1,'2024-01-10','2024-01-15',NULL,'В работе'),
(2,2,'2024-01-12','2024-01-18',NULL,'В работе'),
(3,3,'2024-01-05','2024-01-10','2024-01-09','Завершен'),
(4,4,'2024-01-03','2024-01-08','2024-01-08','Завершен'),
(5,5,'2024-01-14','2024-01-20',NULL,'В работе'),
(6,6,'2024-02-01','2024-02-05',NULL,'В работе'),
(7,7,'2024-02-03','2024-02-07','2024-02-06','Завершен'),
(8,8,'2024-02-10','2024-02-15',NULL,'В работе'),
(9,9,'2024-02-11','2024-02-16','2024-02-15','Завершен'),
(10,10,'2024-02-12','2024-02-18',NULL,'В работе'),
(11,11,'2024-02-13','2024-02-17','2024-02-17','Завершен'),
(12,12,'2024-02-14','2024-02-20',NULL,'В работе'),
(13,13,'2024-02-15','2024-02-21',NULL,'В работе'),
(14,14,'2024-02-16','2024-02-22','2024-02-21','Завершен'),
(15,15,'2024-02-17','2024-02-23',NULL,'В работе');

INSERT INTO OrderFault (OrderID, FaultDescription) VALUES
(1, 'Стук в подвеске'),
(1, 'Течь масла'),
(2, 'Не работает фара'),
(2, 'Разряжен аккумулятор'),
(3, 'Проблемы с запуском двигателя'),
(3, 'Неустойчивая работа на холостых'),
(4, 'Царапина на двери'),
(5, 'Шум при торможении'),
(5, 'Износ тормозных колодок'),
(6, 'Не работает кондиционер'),
(7, 'Пробуксовка сцепления'),
(7, 'Проблемы с коробкой передач'),
(8, 'Стук в рулевой рейке'),
(9, 'Перегрев двигателя'),
(9, 'Утечка охлаждающей жидкости'),
(10, 'Не работает стеклоподъемник'),
(11, 'Скрип в подвеске'),
(12, 'Проблемы с электроникой'),
(12, 'Ошибка датчика ABS'),
(13, 'Не работает магнитола'),
(14, 'Стук в моторе'),
(14, 'Повышенный расход топлива'),
(15, 'Не работает задний ход'),
(15, 'Шум в коробке передач'),
(6, 'Запах гари из-под капота'),
(8, 'Проблемы с тормозами'),
(10, 'Не работает сигнал'),
(11, 'Проблемы с рулевым управлением'),
(13, 'Слабый свет фар');

INSERT INTO OrderService (OrderID, ServiceID, WorkHours, WorkCost, PartsCost) VALUES
(1, 3, 2.5, 5000, 1500),
(1, 2, 1.0, 800, 600),
(2, 4, 3.0, 5400, 1200),
(2, 10, 0.5, 900, 0),
(3, 1, 1.5, 2250, 0),
(3, 8, 1.0, 700, 0),
(4, 5, 4.0, 14000, 3000),
(5, 6, 1.2, 1440, 800),
(5, 2, 0.8, 800, 500),
(6, 4, 2.0, 3600, 900),
(6, 7, 1.5, 2400, 0),
(7, 3, 3.0, 6000, 2000),
(7, 6, 1.0, 1200, 600),
(8, 1, 1.2, 1800, 0),
(8, 9, 1.5, 2100, 300),
(9, 4, 2.5, 4500, 1500),
(9, 10, 0.7, 900, 0),
(10, 2, 1.0, 800, 400),
(10, 8, 1.3, 910, 0),
(11, 6, 1.0, 1200, 500),
(11, 7, 1.5, 2400, 0),
(12, 4, 2.0, 3600, 900),
(12, 1, 1.0, 1500, 0),
(13, 9, 1.5, 2100, 200),
(13, 2, 0.7, 800, 300),
(14, 3, 3.5, 7000, 2500),
(14, 8, 1.0, 700, 0),
(15, 4, 2.2, 3960, 1100),
(15, 6, 1.0, 1200, 600),
(5, 9, 1.0, 1400, 200),
(6, 2, 0.8, 800, 300),
(7, 10, 0.6, 900, 0),
(8, 6, 1.0, 1200, 400),
(9, 3, 2.0, 4000, 1000),
(10, 1, 1.0, 1500, 0),
(11, 8, 1.2, 840, 0),
(12, 5, 3.0, 10500, 3500),
(13, 7, 1.5, 2400, 0),
(14, 10, 0.5, 900, 0);

INSERT INTO OrderWorker (OrderID, WorkerID) VALUES
(1, 1), (1, 3),
(2, 2),
(3, 1),
(4, 5),
(5, 6), (5, 2),
(6, 3), (6, 7),
(7, 1), (7, 6),
(8, 2),
(9, 3), (9, 8),
(10, 4),
(11, 5), (11, 9),
(12, 7), (12, 1),
(13, 8),
(14, 6), (14, 10),
(15, 2), (15, 3),
(5, 9),
(6, 10),
(7, 4),
(8, 5),
(9, 6),
(10, 7),
(11, 8),
(12, 9),
(13, 10),
(14, 1);